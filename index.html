<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Chatbot de L√≠mites - C√°lculo Diferencial</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f0f4f8; padding: 20px; }
    #chatbox { border: 1px solid #ccc; padding: 15px; background: #fff; max-width: 700px; margin: auto; border-radius: 8px; }
    .bot, .user { margin: 10px 0; }
    .bot { color: #1a73e8; }
    .options { margin: 10px 0; }
    .option-btn {
      background-color: #e1ecf4;
      border: 1px solid #1a73e8;
      padding: 10px;
      margin: 5px 5px 0 0;
      border-radius: 5px;
      cursor: pointer;
      display: inline-block;
    }
    .option-btn:hover {
      background-color: #d0e4f0;
    }
    .progress {
      width: 100%;
      background-color: #ddd;
      border-radius: 5px;
      margin-top: 10px;
      height: 10px;
      overflow: hidden;
    }
    .progress-bar {
      height: 10px;
      background-color: #1a73e8;
      width: 0%;
      transition: width 0.4s ease;
    }
  </style>
</head>
<body>

<div id="chatbox">
  <div class="bot">üëã Hola, soy tu chatbot de C√°lculo Diferencial. ¬øQuieres aprender sobre los l√≠mites? Escribe <strong>s√≠</strong> para comenzar.</div>
</div>

<input type="text" id="userInput" placeholder="Escribe aqu√≠ tu respuesta...">
<button onclick="handleUserInput()">Enviar</button>

<div class="progress"><div id="progressBar" class="progress-bar"></div></div>

<script>
  const questions = [
    {
      question: "¬øQu√© significa el l√≠mite de una funci√≥n en un punto?",
      options: [
        "El valor exacto de la funci√≥n en ese punto",
        "El valor al que se aproxima la funci√≥n cuando x se acerca a ese punto",
        "El punto m√°ximo de la funci√≥n"
      ],
      correctIndex: 1
    },
    {
      question: "¬øPor qu√© son importantes los l√≠mites en el c√°lculo diferencial?",
      options: [
        "Porque permiten definir derivadas y continuidad",
        "Porque son parte del √°lgebra b√°sica",
        "Porque indican el √°rea bajo la curva"
      ],
      correctIndex: 0
    },
    {
      question: "¬øQu√© diferencia hay entre un l√≠mite lateral y un l√≠mite general?",
      options: [
        "El l√≠mite lateral considera solo un lado, el general ambos",
        "Ambos son iguales siempre",
        "El l√≠mite general solo se usa con derivadas"
      ],
      correctIndex: 0
    },
    {
      question: "¬øC√≥mo puedo saber si un l√≠mite existe en un punto?",
      options: [
        "Si el valor de la funci√≥n est√° definido",
        "Si los l√≠mites laterales existen y son iguales",
        "Si la derivada est√° definida"
      ],
      correctIndex: 1
    },
    {
      question: "¬øQu√© hago si al evaluar un l√≠mite obtengo una indeterminaci√≥n como 0/0?",
      options: [
        "Cambio el valor del punto",
        "Uso t√©cnicas como factorizaci√≥n o L'H√¥pital",
        "Elimino el punto del dominio"
      ],
      correctIndex: 1
    },
    {
      question: "¬øCu√°l es la diferencia entre el valor del l√≠mite y el valor de la funci√≥n?",
      options: [
        "No hay diferencia",
        "El l√≠mite es el comportamiento cercano al punto; el valor de la funci√≥n es el valor exacto",
        "La funci√≥n siempre vale lo mismo que su l√≠mite"
      ],
      correctIndex: 1
    },
    {
      question: "¬øC√≥mo se relacionan los l√≠mites con la continuidad y la derivada?",
      options: [
        "La derivada es el resultado de una integral",
        "Una funci√≥n es continua si no tiene derivada",
        "La continuidad y la derivada se definen usando l√≠mites"
      ],
      correctIndex: 2
    }
  ];

  let currentQuestion = -1;
  let score = 0;

  function handleUserInput() {
    const input = document.getElementById("userInput").value.trim().toLowerCase();
    const chatbox = document.getElementById("chatbox");

    if (input.includes("s√≠") && currentQuestion === -1) {
      chatbox.innerHTML += `<div class="user">${input}</div>`;
      document.getElementById("userInput").value = "";
      currentQuestion = 0;
      score = 0;
      showQuestion();
    } else {
      chatbox.innerHTML += `<div class="bot">‚úã Escribe <strong>s√≠</strong> para comenzar.</div>`;
    }
  }

  function showQuestion() {
    const chatbox = document.getElementById("chatbox");

    updateProgress();

    if (currentQuestion >= questions.length) {
      const finalMessage = getFinalFeedback(score);
      chatbox.innerHTML += `<div class="bot">üèÅ Has terminado.<br>‚úÖ Respuestas correctas: <strong>${score} de ${questions.length}</strong><br>${finalMessage}</div>`;
      return;
    }

    const q = questions[currentQuestion];
    let html = `<div class="bot">üëâ Pregunta ${currentQuestion + 1}:<br><strong>${q.question}</strong></div><div class="options">`;

    q.options.forEach((opt, index) => {
      html += `<button class="option-btn" onclick="checkAnswer(${index})">${opt}</button>`;
    });

    html += `</div>`;
    chatbox.innerHTML += html;
    chatbox.scrollTop = chatbox.scrollHeight;
  }

  function checkAnswer(selectedIndex) {
    const q = questions[currentQuestion];
    const chatbox = document.getElementById("chatbox");

    if (selectedIndex === q.correctIndex) {
      score++;
      chatbox.innerHTML += `<div class="bot">‚úÖ ¬°Correcto!</div>`;
    } else {
      chatbox.innerHTML += `<div class="bot">‚ùå Incorrecto. La respuesta correcta era: <strong>${q.options[q.correctIndex]}</strong></div>`;
    }

    currentQuestion++;
    setTimeout(showQuestion, 1200);
  }

  function getFinalFeedback(score) {
    if (score >= 6) {
      return "üéâ ¬°Excelente dominio del tema!";
    } else if (score >= 4) {
      return "üëç Vas bien, pero puedes repasar algunos conceptos.";
    } else {
      return "üìò Es recomendable repasar el tema de los l√≠mites. ¬°Sigue practicando!";
    }
  }

  function updateProgress() {
    const bar = document.getElementById("progressBar");
    const percentage = ((currentQuestion) / questions.length) * 100;
    bar.style.width = percentage + "%";
  }
</script>

</body>
</html>

